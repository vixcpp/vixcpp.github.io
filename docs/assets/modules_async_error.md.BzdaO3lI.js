import{_ as i,o as a,c as e,a as t}from"./app.BpCqEuXO.js";import"./chunks/markjs.l6TISjdC.js";import"./chunks/minisearch.DigTKvvb.js";const u=JSON.parse('{"title":"async/core/error","description":"","frontmatter":{},"headers":[],"relativePath":"modules/async/error.md","filePath":"modules/async/error.md","lastUpdated":1770918867000}'),n={name:"modules/async/error.md"};function l(r,s,p,h,o,d){return a(),e("div",null,[...s[0]||(s[0]=[t(`<h1 id="async-core-error" tabindex="-1">async/core/error <a class="header-anchor" href="#async-core-error" aria-label="Permalink to &quot;async/core/error&quot;">​</a></h1><p>Error handling system for the Vix async runtime.</p><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>The <code>error.hpp</code> file defines the error model used across:</p><ul><li>Scheduler</li><li>Thread pool</li><li>Runtime</li><li>Timers</li><li>Cancellation system</li></ul><p>It is based on:</p><ul><li><code>std::error_code</code></li><li>A custom <code>async</code> error category</li><li>A compact <code>enum class errc</code></li></ul><p>The design is:</p><ul><li>Lightweight</li><li>Allocation-free</li><li>Stable</li><li>Compatible with standard C++ error handling</li></ul><h2 id="error-enumeration" tabindex="-1">Error Enumeration <a class="header-anchor" href="#error-enumeration" aria-label="Permalink to &quot;Error Enumeration&quot;">​</a></h2><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">enum</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> errc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">std</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">::</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">uint8_t</span></span></code></pre></div><h3 id="generic-errors" tabindex="-1">Generic errors <a class="header-anchor" href="#generic-errors" aria-label="Permalink to &quot;Generic errors&quot;">​</a></h3><p>Code Meaning</p><hr><p>ok No error invalid_argument Invalid input not_ready Operation not ready timeout Operation timed out canceled Operation canceled closed Resource closed overflow Capacity overflow</p><h3 id="runtime-scheduler" tabindex="-1">Runtime / Scheduler <a class="header-anchor" href="#runtime-scheduler" aria-label="Permalink to &quot;Runtime / Scheduler&quot;">​</a></h3><p>Code Meaning</p><hr><p>stopped Runtime stopped queue_full Task queue full</p><h3 id="thread-pool" tabindex="-1">Thread Pool <a class="header-anchor" href="#thread-pool" aria-label="Permalink to &quot;Thread Pool&quot;">​</a></h3><p>Code Meaning</p><hr><p>rejected Task submission rejected</p><h3 id="platform" tabindex="-1">Platform <a class="header-anchor" href="#platform" aria-label="Permalink to &quot;Platform&quot;">​</a></h3><p>Code Meaning</p><hr><p>not_supported Feature not supported</p><h2 id="error-category" tabindex="-1">Error Category <a class="header-anchor" href="#error-category" aria-label="Permalink to &quot;Error Category&quot;">​</a></h2><p>The async subsystem defines its own <code>std::error_category</code>.</p><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> error_category</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> std</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error_category</span></span></code></pre></div><p>Category name:</p><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;async&quot;</span></span></code></pre></div><p>This integrates seamlessly with <code>std::error_code</code>.</p><h2 id="creating-error-codes" tabindex="-1">Creating Error Codes <a class="header-anchor" href="#creating-error-codes" aria-label="Permalink to &quot;Creating Error Codes&quot;">​</a></h2><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> namespace</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> vix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">core</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">std</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">::error_code ec </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> make_error_code</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">errc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">::timeout);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ec)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    std</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">::cout </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ec.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // &quot;timeout&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Because <code>is_error_code_enum</code> is specialized, you can write:</p><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">std</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">::error_code ec </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> errc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">::canceled;</span></span></code></pre></div><h2 id="cancellation-integration" tabindex="-1">Cancellation Integration <a class="header-anchor" href="#cancellation-integration" aria-label="Permalink to &quot;Cancellation Integration&quot;">​</a></h2><p>The cancellation system uses:</p><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">errc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">::canceled</span></span></code></pre></div><p>Helper:</p><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">std</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error_code</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> cancelled_ec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><p>This ensures consistent error propagation across the async runtime.</p><h2 id="design-goals" tabindex="-1">Design Goals <a class="header-anchor" href="#design-goals" aria-label="Permalink to &quot;Design Goals&quot;">​</a></h2><ul><li>No exceptions required</li><li>Thread-safe propagation</li><li>Zero dynamic allocation</li><li>Deterministic behavior</li><li>Stable ABI-friendly enum</li></ul><h2 id="typical-usage-pattern" tabindex="-1">Typical Usage Pattern <a class="header-anchor" href="#typical-usage-pattern" aria-label="Permalink to &quot;Typical Usage Pattern&quot;">​</a></h2><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">std</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">::error_code ec;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (queue_full)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ec </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> errc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">::queue_full;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ec)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ec;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>This style makes async code:</p><ul><li>Explicit</li><li>Predictable</li><li>Composable</li></ul><p>The async error model keeps the runtime deterministic and fully compatible with modern C++ error handling.</p>`,50)])])}const E=i(n,[["render",l]]);export{u as __pageData,E as default};
